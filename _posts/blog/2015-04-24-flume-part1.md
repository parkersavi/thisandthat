---
layout: post
title: "Apache Flume Tutorial — Part 1"
description: "Downloading and setting up flume"
categories: blog
tags: [flume,tutorial]
image:
  background: triangular.png
---

**Objective**: To understand flume and at the end of tutorial we will write our first flume example. We will tail a log file and write it's output on the screen

**Prerequisites**: Flume Setup

Some flume concepts

* **Event (your data)** -   a unit of data flow having a byte payload and an optional set of string attributes
 
* **Source (more like a producer inside the Agent)** - consumes events delivered to it by an external source like webserver

* **Channel (buffer)** -  passive store that keeps the event until it’s consumed by a Flume sink.
    Sink (more like a consumer inside the Agent) - removes the event from the channel. You can write your own sinks and do whatever you feel like with the even
 
* **Agent (holds your Source, Channel and Sink)** -  An agent is a (JVM) process that hosts the components through which events flow from an external source to the next destination
 
 ![Flume](/images/flumepart1_pic1.png)
 
Now let's understand using an example.

**What we will do**: We will send data to flume Source, which will pass through the Channel and we will simply log the data using Sink
Once you have flume installed on your machine (See Flume Setup Tutorial), all you need to do for this tutorial is just write a configuration file

**Steps:**
1) Go to the conf directory of your flume installation.
            cd apache-flume/conf/
 

2) Write configuration file and put it in your conf directory
            
{% highlight css %}  
 #give a name to your source, channels, sinks. Also name of the agent is agent
 agent.sources = r1
agent.channels = k1
agent.sinks = c1
 

 #CONFIGURE SOURCE. tail the log on your server.
agent.sources.r1.type = exec
agent.sources.r1.command = tail -F /mydir/somefile.txt
 

 #CONFIGURE CHANNEL. It will buffer 1000 events
agent.channels.k1.type = memory
agent.channels.k1.capacity = 1000
agent.channels.k1.transactionCapacity = 100
 

 #CONFIGURE SINK. The type is logger which will print the tailed file contents to screen
agent.sinks.c1.type = logger
 

 #CONNECT source,channel and sink
agent.sources.r1.channels = k1
agent.sinks.c1.channel = k1

 {% endhighlight %}

Save the above configuration in a file. Let's call it flume_logging.conf and put it under conf directory
 

3)  Run the example. Make sure you are in your apache-flume directory

{% highlight css %}
cd apache-flume/
   
and run using following command
 bin/flume-ng agent
    --conf conf
    --conf-file conf/flume_logging.conf
    --name agent
     -Dflume.root.logger=INFO,console
      {% endhighlight %}

 
 
 
 
 
